<meta comntent="text/html;charset=utf-8" http-equiv="Content-Type">

<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=0.55">

<html>
    <head>

    <title>Cam</title>

    <script src="script/jquery/jquery-3.6.0.min.js"></script>

    <script>

        var camId;

        function refreshCapture(){

            // Random value after the image name helps to ignore the cache at refresh
            $("#cam_" + camId).attr('src', '/greenwall/cam-capture/capture_' + camId + '.jpg?' + Math.random());
        }

        $(document).ready(function(){

            // I get the camId parameter as the window.name - window.open()

            //
            // Fetch camId
            //
            camId = window.name;

            //
            // Title of new window
            //
            $(document).find("title").html(camId);


            //
            // Write camId
            //
            $(document).find("#title").html(camId);

            //
            // Create <img> node
            //
            var img = $('<img id="cam_' + camId + '">');

            // Random value after the image name helps to ignore the cache at refresh
            img.attr('src', '/greenwall/cam-capture/capture_' + camId + '.jpg?' + Math.random());

            // Add <img> node
            $(document).find("#img").append(img);

            setInterval(refreshCapture, 10000);
        });
    </script>

    </head>
    
    <body>
        <table border="0">
            <tr>
                <td id="title" style="text-align:center; font-weight: bold;">
                    camId
                </td>
            </tr>
            <tr>
                <td id='img'>
                <!-- <img id="cam_' + camId + '" src="/greenwall/cam-capture/capture_' + camId + '.jpg?"> -->
                </td>
            </tr>
        </table>
    </body>
</html>
